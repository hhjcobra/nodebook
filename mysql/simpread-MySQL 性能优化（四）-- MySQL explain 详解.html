
    <html lang="en" class="simpread-font simpread-theme-root" style="false">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Kenshin"/>
        <meta name="description" content="简悦 ( SimpRead ) - 让你瞬间进入沉浸式阅读的 Chrome extension" />
        <meta name="keywords" content="Chrome extension, Chrome 扩展, 阅读模式, 沉浸式阅读, read mode, reading mode, reader view"/>
        <meta name="thumbnail" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>

        <link rel="stylesheet" href="http://sr.ksria.cn/puread/simpread.css"                  type="text/css" media="all">
        <link rel="stylesheet" href="http://sr.ksria.cn/puread/theme_common.css"              type="text/css" media="all">
        <link rel="stylesheet" href="http://sr.ksria.cn/puread/theme_github.css" type="text/css" media="all">

        <style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {letter-spacing: 1px;}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {text-indent: 2px;}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {letter-spacing: 1px;}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {letter-spacing: 1px;}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style><style type="text/css" id="simpread-custom-art">sr-rd-content *, sr-rd-content p, sr-rd-content div {}</style><style type="text/css" id="simpread-custom-code">sr-rd-content pre code, sr-rd-content pre code * {}</style><style type="text/css" id="simpread-custom-desc">sr-rd-desc {}</style><style type="text/css" id="simpread-custom-pre">sr-rd-content pre {}</style><style type="text/css" id="simpread-custom-title">sr-rd-title {}</style><style type="text/css" id="simpread-custom-css"></style>
        <title>简悦 | MySQL 性能优化（四）-- MySQL explain 详解</title>
        
    </head>
    <body>
        <sr-read style="0">
            <sr-rd-title>MySQL 性能优化（四）-- MySQL explain 详解</sr-rd-title>
            <sr-rd-desc style="display: none;"></sr-rd-desc>
            <sr-rd-content><sr-blockquote>
<p>MySQL 中的 explain 命令显示了 mysql 如何使用索引来处理 select 语句以及连接表。explain 显示的信息可以帮助选择更好的索引和写出更优化的查询语句。</p>
</sr-blockquote><h4 id="sr-toc-0">一、格式</h4><p>explain + select 语句；</p><p>例如：explain select * from tb_student;</p><h4 id="sr-toc-1">二、5.5 和 5.7 版本 explain 的区别</h4><p>5.7 之后的版本默认会有 partitions 和 filtered 两列，但是 5.5 版本中是没有的，需要</p><p>使用 explain partitions select …… 来显示带有 partitions 的列，</p><p>使用 explain extended select …… 来显示带有 filtered 的列。</p><p>本文是基于 5.5.54 版本的。</p><h4 id="sr-toc-2">三、explain 的作用</h4><p>1. 描述 MySQL 如何执行查询操作、执行顺序，使用到的索引，以及 MySQL 成功返回结果集需要执行的行数。</p><p>2. 可以帮助我们分析 select 语句, 让我们知道查询效率低下的原因, 从而改进我们的查询，让查询优化器能够更好的工作</p><p>查询优化器的作用：</p><p>1. 优化 select 语句，分析哪些是常量表达式（例如 id=1），以及分析哪些表达式可以直接转换成常量的</p><p>2. 对 where 条件进行简化和转换，如去掉无用条件，调整条件结构等</p><p>3. 读取涉及的表的统计信息，并计算分析（例如返回的行数，索引信息等），最终得出执行计划</p><h4 id="sr-toc-3">四、执行计划（QEP）包含的信息</h4><p>[图片上传中...(image-d8393a-1561722900331-0)]</p><ol>
<li><p>id：标识符，表示执行顺序</p></li>
<li><p>select _type：查询类型</p></li>
<li><p>table：输出行所引用的表</p></li>
<li><p>partitions：使用的哪个分区，需要结合表分区才可以看到</p></li>
<li><p>type：表示按某种类型来查询，例如按照索引类型查找，按照范围查找。从最好到最差的连接类型为 const、eq_reg、ref、range、indexhe 和 all</p></li>
<li><p>possible_keys：可能用到的索引，保存的是索引名称，如果是多个索引的话，用逗号隔开</p></li>
<li><p>key：实际用到的索引，保存的是索引名称，如果是多个索引的话，用逗号隔开</p></li>
<li><p>key_len：表示本次查询中，所选择的索引长度有多少字节</p></li>
<li><p>ref：显示索引的哪一列被使用了，如果可能的话，是一个常数</p></li>
<li><p>rows：显示 mysql 认为执行查询时必须要返回的行数</p></li>
<li><p>filtered：通过过滤条件之后对比总数的百分比</p></li>
<li><p>extra：额外的信息，例如：using file sort ，using where， using join buffer，using index 等</p></li>
</ol><h4 id="sr-toc-4">五、执行计划中各个参数的详解</h4><p><strong>1.id</strong></p><p>表示 select 标识符，同时表明执行顺序，也就是说 id 是一个查询的序列号，查询序号即为 sql 语句执行的顺序。</p><p>（1）当 id 值相同时，按从上到下的顺序执行</p><p>（2）当 id 全部不同时，按 id 从大到小执行</p><p>（3）当 id 部分不同时，先执行 id 大的，id 相同的，按从上到下的顺序执行</p><p><strong>2.select_type</strong></p><p>（1）simple：表示简单的 select，没有 union 和子查询</p><p>（2）primary：最外面的查询 或者 主查询，在有子查询的语句中，最外面的 select 查询就是 primary</p><p>（3）subquery：子查询</p><p>（4）union：union 语句的第二个或者说是后面那一个 select</p><p>（5）union result：union 之后的结果</p><p>（6）dependent unoin：unoin 中的第二个或随后的 select 查询，依赖于外部查询的结果集</p><p>（7）dependent subquery：子查询中的第一个 select 查询，依赖于外部 查询的结果集</p><p>（8）derived：衍生表（5.7 版本中不存在这一个）</p><p><strong>3.table</strong></p><p>通常是表名，或者表的别名，或者一个为查询产生临时表的标示符（如派生表、子查询、集合）</p><p><strong>4.partitions</strong></p><p>使用的哪些分区（对于非分区表值为 null），在 5.5 版本中需要加上 explain partitions select .....</p><p><strong>5.type</strong></p><p>（1）const：表中最多有一个匹配行，const 用于比较 primary key 或者 unique 索引。因为只匹配一行数据，所以很快</p><p>（2）eq_ref：唯一性索引扫描，对于每个来自于前面的表的记录，从该表中读取唯一一行</p><p>（3）ref：非唯一性索引扫描，对于每个来自于前面的表的记录，所有匹配的行从这张表取出</p><p>（4）ref_or_null：类似于 ref，但是可以搜索包含 null 值的行，例如：select * from student where address='xxx' or address is null，需要在 address 建立索引。</p><p>（5）index_merge：查询语句用到了一张表的多个索引时，mysql 会将多个索引合并到一起</p><p>（6）range：按指定范围（如 in、&lt;、&gt;、between and 等，但是前提是此字段要建立索引）来检索，很常见。如：select * from student where id &lt; 5，id 上要有索引。</p><p>（7）index：全” 表 “扫描，但是是在索引树中扫描，通常比 ALL 快，因为索引文件通常比数据文件小，index 扫描是通过二叉树的方式扫描，而 all 是扫描物理表。（也就是说虽然 all 和 index 都是读全表，但 index 是从索引中读取的，而 all 是从硬盘中读的）。例如：select name from student，但 name 字段上需要建立索引，也就是查询的字段属于索引中的字段。</p><p>（8）all：全表扫描，扫描完整的物理表，此时就需要优化了。</p><p><strong>6.possible_keys</strong></p><p>指出 MySQL 能在该表中可能使用的索引，显示的是索引的名称，多个索引用逗号隔开，如果没有，则为 null。</p><p><strong>7.key</strong></p><p>MySQL 决定实际用到的索引，显示的是索引的名称，多个索引用逗号隔开，如果没有，则为 null</p><p><strong>8.key_len</strong></p><p>当用到组合索引的时候判断索引是否完全用上。</p><sr-blockquote>
<p>实例：假设 student 表中有 id int,name char(20) DEFAULT NULL,address varchar(20) DEFAULT NULL,remark varchar(20) NOT NULL 字段，建立的索引是 idx_address_remark（在 address 和 remark 上建立的组合索引）</p>
<p>查询的 sql 是：select * from student where address='深圳' and remark='java coder'，此时，执行计划中的 key_len 是 （20<em>3+1+2）+ （20</em>3+2）= 125，那么这个是怎么得来的呢？</p>
<p>解析：20 表示建表的时候 varchar(20) ，3 表示 utf8 字符集占用 3 个字节，1 表示 MySQL 需要 1 个字节表示 null，2 表示变长字段（varchar 是变长的）。</p>
<p>假设 drop 掉刚刚建立的索引，新建索引 idx_name_address（在 name 和 address 上建立组合索引）</p>
<p>查询的 sql 是：select * from student where name='xbq' and address='深圳'，此时，执行计划中的 key_len 是 （20<em>3+1）+ （20</em>3+2）= 123，那么这个值是怎么得来的呢？</p>
<p>解析：20 表示建表的时候 char(20) ，3 表示 utf8 字符集占用 3 个字节，1 表示 MySQL 需要 1 个字节标识 null，即 20*3+1，后面的同样的道理。</p>
</sr-blockquote><p>key_len 只计算 where 条件用到的索引长度，而排序和分组就算用到了索引，也不会计算到 key_len 中。</p><p>计算 key_len 的公式：</p><sr-blockquote>
<p>varchr(10) 变长字段且允许 NULL = 10 * ( character set：utf8=3,gbk=2,latin1=1) + 1(NULL) + 2(变长字段)</p>
<p>varchr(10) 变长字段且不允许 NULL = 10 *( character set：utf8=3,gbk=2,latin1=1) + 2(变长字段)</p>
<p>char(10) 固定字段且允许 NULL = 10 * ( character set：utf8=3,gbk=2,latin1=1)+1(NULL)</p>
<p>char(10) 固定字段且不允许 NULL = 10 * ( character set：utf8=3,gbk=2,latin1=1)</p>
</sr-blockquote><p><strong>9.ref</strong></p><p>显示索引的哪一列被使用了，如果可能的话，是一个常数</p><p><strong>10.rows</strong></p><p>显示 mysql 认为执行查询时必须要返回的行数，可结合 type 和 key 分析，没有用上索引的情况下，会全表扫描。rows 的值越小越好，说明检索的数据少</p><p><strong>11.filtered</strong></p><p>给出了一个百分比的值，这个百分比值和 rows 列的值一起使用，可以估计出那些将要和执行计划中的前一个表（前一个表就是指 id 列的值比当前表的 id 小的表）进行连接的行的数目。</p><p>这一列在 5.5 版本中，需要加上 explain extended select ....。</p><p><strong>12.extra</strong></p><p>此字段显示一些额外的信息，但是此字段的部分值具有优化的参考意义。</p><p>（1）using where：表示查询使用了 where 语句来处理结果</p><p>（2）using index：表示使用了覆盖索引。这个值重点强调了只需要使用索引就可以满足查询表的要求，不需要直接访问表数据。</p><p>（3）using join buffer：这个值强调了在获取连接条件时没有使用索引，并且需要连接缓冲区来存储中间结果。如果出现了这个值，那应该注意，根据查询的具体情况可能需要添加索引来改进性能</p><p>（4）using filesort：这是 order by 语句的结果。这可能是一个 CPU 密集型的过程。using filesort 表示出现了文件内排序，表示很不好的现象，必须要优化，特别是大表，可以通过选择合适的索引来改进性能，用索引来为查询结果排序。</p><p>（5）using temporary：mysql 需要创建一张临时表来保存中间结果。 也就是说，需要先把数据放到临时表中，然后从临时表中获取需要的数据。出现这种临时表，也是必须需要优化的地方，特别是数据量大的情况。两个常见的原因是在来自不同表的列上使用了 distinct，或者使用了不同的 order by 和 group by 列。</p><p>欢迎关注我的公众号，第一时间接收文章推送~ 搜索公众号： 码咖 或者 扫描下方二维码：</p><div>
<div>
<div></div>
<div data-width="344" data-height="344"><div class="sr-rd-content-center"><img class="" src="http://upload-images.jianshu.io/upload_images/6748468-4eae24ea0cc80322.jpg"></div></div>
</div>
<div>qrcode_wx.jpg</div>
</div></sr-rd-content>
            <sr-rd-footer>
                <sr-rd-footer-group>
                    <sr-rd-footer-line></sr-rd-footer-line>
                    <sr-rd-footer-text>全文完</sr-rd-footer-text>
                    <sr-rd-footer-line></sr-rd-footer-line>
                </sr-rd-footer-group>
                <sr-rd-footer-copywrite>
                    <div>本文由 <a href="http://ksria.com/simpread" target="_blank">简悦 SimpRead</a> 转码，用以提升阅读体验，<a href="https://www.jianshu.com/p/7e0870ad15bd?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io" target="_blank">原文地址 </a></div>
                </sr-rd-footer-copywrite>
            </sr-rd-footer>
        </sr-read>
    </body>
    </html>
